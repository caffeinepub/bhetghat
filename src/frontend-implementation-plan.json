{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix production boot loading and restore valid PWA icon assets",
  "requirements": [
    {
      "id": "REQ-30",
      "summary": "Ensure production loads the built React bundle (not /src/main.tsx) and always renders a visible boot error into #root instead of a blank page.",
      "acceptanceCriteria": [
        "In production builds, the site does not request `/src/main.tsx` (verified in browser Network tab).",
        "Opening `https://bhetghat-fus.caffeine.xyz/#caffeineAdminToken=b8def835a51005b977429f18e2f7840712f07bbe076b0db3d78b04cc1724815e` renders the app UI instead of a blank white page.",
        "If the JS bundle fails to load for any reason, a visible error screen is rendered into `#root` (no silent blank page)."
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Update the production entry loading so the React entry is loaded via a Vite-transformable module script (pointing at `/src/main.tsx`) while keeping `entry-loader.js` as a pre-boot script for SW-disable and boot error handling; ensure script ordering supports SW cleanup before app mount."
        },
        {
          "path": "frontend/public/entry-loader.js",
          "operation": "modify",
          "description": "Remove any production fallback that attempts to import `/src/main.tsx`; convert to a production-safe pre-boot script that only performs temporary service-worker disable/cleanup and installs a robust global error handler/watchdog that renders an English-only error UI into `#root` if the app bundle fails to execute or mount."
        }
      ]
    },
    {
      "id": "REQ-31",
      "summary": "Restore valid PNG icon assets at the exact paths referenced by the manifest and index.html.",
      "acceptanceCriteria": [
        "Requesting `/assets/generated/pwa-icon.dim_192x192.png`, `/assets/generated/pwa-icon.dim_512x512.png`, and `/assets/generated/pwa-icon-maskable.dim_512x512.png` returns HTTP 200 and valid PNG content.",
        "Requesting `/assets/generated/favicon.dim_48x48.png` and `/assets/generated/apple-touch-icon.dim_180x180.png` returns HTTP 200 and valid PNG content.",
        "Chrome Application tab shows the manifest loads without icon errors/warnings related to invalid images."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/pwa-icon.dim_192x192.png",
          "operation": "create",
          "description": "Add the required valid PNG asset at `frontend/public/assets/generated/pwa-icon.dim_192x192.png` so the manifest icon reference resolves with HTTP 200."
        },
        {
          "path": "frontend/public/assets/generated/pwa-icon.dim_512x512.png",
          "operation": "create",
          "description": "Add the required valid PNG asset at `frontend/public/assets/generated/pwa-icon.dim_512x512.png` so the manifest icon reference resolves with HTTP 200."
        },
        {
          "path": "frontend/public/assets/generated/pwa-icon-maskable.dim_512x512.png",
          "operation": "create",
          "description": "Add the required valid PNG asset at `frontend/public/assets/generated/pwa-icon-maskable.dim_512x512.png` so the manifest icon reference resolves with HTTP 200."
        },
        {
          "path": "frontend/public/assets/generated/favicon.dim_48x48.png",
          "operation": "create",
          "description": "Add the required valid PNG asset at `frontend/public/assets/generated/favicon.dim_48x48.png` so the favicon link in `frontend/index.html` resolves with HTTP 200."
        },
        {
          "path": "frontend/public/assets/generated/apple-touch-icon.dim_180x180.png",
          "operation": "create",
          "description": "Add the required valid PNG asset at `frontend/public/assets/generated/apple-touch-icon.dim_180x180.png` so the Apple touch icon link in `frontend/index.html` resolves with HTTP 200."
        },
        {
          "path": "frontend/public/manifest.webmanifest",
          "operation": "modify",
          "description": "Verify the manifest icon entries match the restored files under `frontend/public/assets/generated/` and adjust only if needed to ensure all referenced icon paths and purposes remain correct."
        }
      ]
    },
    {
      "id": "REQ-32",
      "summary": "Add the non-deprecated PWA capability meta tag while keeping existing Apple tags.",
      "acceptanceCriteria": [
        "The console no longer reports the deprecation warning about `apple-mobile-web-app-capable` missing `mobile-web-app-capable` (or the warning is reduced to non-actionable informational messages only).",
        "The app continues to load and function normally after the meta tag change."
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Add `<meta name=\"mobile-web-app-capable\" content=\"yes\">` alongside the existing Apple PWA meta tags, without removing the Apple-specific tags."
        }
      ]
    }
  ]
}